name: setup-nexus-python
inputs:
  endpoint:
    required: true
  login:
    required: true
  password:
    required: true
runs:
  using: composite
  steps:
    - run: |
        rm -f ~/.config/pip/pip.conf
        mkdir -p ~/.config/pip
        echo "[global]" >> ~/.config/pip/pip.conf
        echo "index = https://${{ inputs.endpoint }}/repository/python/pypi" >> ~/.config/pip/pip.conf
        echo "index-url = https://${{ inputs.endpoint }}/repository/python/simple" >> ~/.config/pip/pip.conf
        rm -f ~/.netrc
        echo machine ${{ inputs.endpoint }} >> ~/.netrc
        echo login ${{ inputs.login }} >> ~/.netrc
        echo password ${{  inputs.password }} >> ~/.netrc
      shell: bash
